{% extends 'base_modal.html' %}

{% load static %}

{% block main %}
<h1>Widgets</h1>
<form method="post" action="">
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col"><input type="checkbox" id="checkAllButton"></th>
        <th scope="col" width="200">Refresh interval</th>
        <th scope="col" width="200">Position</th>
      </tr>
    </thead>
    <tbody>

    </tbody>
  </table>
  <a class="btn btn-primary" id="saveWidgetsButton" href="">Save widgets</a>
</form>
{% endblock %}

{% block javascript %}
{{ widget_vars|json_script:"widget-vars" }}
<script type="text/javascript" src="{% static 'api/api.provider.js' %}"></script>
<script type="text/javascript" src="{% static 'api/api.provider.factory.js' %}"></script>
<script type="text/javascript" src="{% static 'ejs.min.js' %}"></script>
<script type="text/javascript" src="{% static 'api/widgets.jquery.js' %}"></script>
<script type="text/javascript">
$(function() {
    $('table tbody').Widgets({
        saveButton: $('#saveWidgetsButton'),
        checkAllButton: $('#checkAllButton'),
        provider: apiProviderFactory.createWidgets()
    });
});
</script>
{% endblock %}
