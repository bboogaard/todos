{% extends 'base.html' %}

{% block main %}
<h1>{{ title }}</h1>
<div class="float-right mb-2">
    <a class="btn btn-primary" href="{% url 'todos:file_create' file_type %}">Add {{ object_name }}</a>&nbsp;
    <a class="btn btn-primary" id="delete-btn" href="">Delete {{ object_name_plural }}</a>
</div>
<form method="post" action="{% url 'todos:file_delete' file_type %}">
    {% csrf_token %}
    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col"><input type="checkbox" id="select-all"></th>
          <th scope="col">{{ object_name }}</th>
        </tr>
      </thead>
      <tbody>
        {% for file in files %}
        <tr>
          <td><input type="checkbox" name="file" value="{{ file.id }}"></td>
          <td><a href="{% url 'todos:file_update' file_type file.pk %}">{{ file }}</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
</form>
{% endblock %}

{% block javascript %}
<script type="text/javascript">
$(function() {
    $('#delete-btn').click(function(event) {
        event.preventDefault();
        $('form').submit();
    });
    $('#select-all').click(function() {
        $('input[name="file"]').prop('checked', $(this).prop('checked'));
    });
});
</script>
{% endblock %}
