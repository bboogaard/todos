{% extends 'main.html' %}
{% load static %}

{% block nav %}
<!-- Top Navigation -->
<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
  <a class="navbar-brand" href="{% url 'todos:index' %}">Home</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarsExampleDefault">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Wallpapers</a>
        <div class="dropdown-menu" aria-labelledby="dropdown01">
            <a class="dropdown-item" href="#" data-action="next-wallpaper">
                Next wallpaper
            </a>
        </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="dropdown02" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Galleries</a>
        <div class="dropdown-menu" aria-labelledby="dropdown02">
            {% for id, gallery in galleries %}
            <a class="dropdown-item" href="#" data-setting-name="gallery" data-setting-value="{{ id }}">
              {% if settings.gallery == id %}
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
<path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
              </svg>
              {% endif %}{{ gallery }}</a>
             {% endfor %}
        </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="dropdown03" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Settings</a>
        <div class="dropdown-menu" aria-labelledby="dropdown03">
          <a class="dropdown-item" href="#" data-setting-name="todos_provider" data-setting-value="{% if settings.todos_provider == 'local' %}remote{% else %}local{% endif %}">
              {% if settings.todos_provider == 'remote' %}
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
<path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
</svg>{% endif %}
          Save todo's in database</a>
          <a class="dropdown-item" href="#" data-setting-name="todos_position" data-setting-value="{% if settings.todos_position == 'top' %}bottom{% else %}top{% endif %}">
              Position todo's at {% if settings.todos_position == 'top' %}bottom{% else %}top{% endif %}
          </a>
          <a class="dropdown-item" id="about-link" href="#">About</a>
        </div>
      </li>
    </ul>
    <form method="get" action="" class="form-inline my-2 my-lg-0">
      <input class="form-control mr-sm-2" type="text" name="q" placeholder="Search" aria-label="Search" value="{{ form.q.value|default_if_none:'' }}">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
    </form>
  </div>
</nav>
{% endblock %}

{% block content %}
    <ul id="todos"{% if not searching %} contenteditable{% endif %}>
        <li>Enter item</li>
    </ul>

    <br>&nbsp;
    {% if not searching %}
    <a href="javascript:void(0);" id="save" class="btn btn-primary">Save</a>
    <a href="javascript:void(0);" id="delete" class="btn btn-primary">Delete</a>
    {% else %}
    <a href="javascript:void(0);" id="activate" class="btn btn-primary">Activate</a>
    {% endif %}

{% endblock %}

{% block javascript %}
    {{ block.super }}
    {{ json_vars|json_script:"json-vars" }}
    <script type="text/javascript" src="{% static 'checklist.provider.local.js' %}"></script>
    <script type="text/javascript" src="{% static 'checklist.provider.remote.js' %}"></script>
    <script type="text/javascript" src="{% static 'checklist.provider.factory.js' %}"></script>
    <script type="text/javascript" src="{% static 'checklist.jquery.js' %}"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $('ul#todos').checkList({
                saveButton: $('#save'),
                deleteButton: $('#delete'),
                activateButton: $('#activate'),
                searching: {{ searching|yesno:'true,false' }},
                provider: checkListProviderFactory.create('{{ settings.todos_provider }}')
            });
        });
    </script>
{% endblock %}
